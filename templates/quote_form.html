{% extends "layout.html" %}
{% block title %}ë§ì¶¤ ê²¬ì  ìš”ì²­{% endblock %}

{% block content %}
<style>
  @font-face {
    font-family: 'HumanRounded';
    font-style: normal;
    font-weight: 700;
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2107@1.0/HumanRounded.woff') format('woff');
  }

  .quote-title {
    font-family: 'HumanRounded', 'Malgun Gothic', sans-serif;
    font-size: 36px;
    font-weight: bold;
  }
</style>

<div class="container mt-5 mb-5">
  <div class="card shadow-sm">
    <div class="card-header text-center py-4" style="background-color: #0d6efd;">
      <h1 class="quote-title text-white">ë§ì¶¤ ê²¬ì  ìš”ì²­</h1>
      <p class="mt-3 fw-bold text-white mb-0">
        ğŸ“Œ ê°€ì´ë“œ 4U ì˜ ëª¨ë“  ìƒí’ˆ (ë°ì´íŒ© ë° ë§ì¶¤ ê²¬ì  ìƒí’ˆ í¬í•¨)ì€ ë‹¨ë… ì°¨ëŸ‰ + ë‹¨ë… ê°€ì´ë“œë¡œ ì§„í–‰ë˜ëŠ” ë‹¨ë…íˆ¬ì–´ ìƒí’ˆì…ë‹ˆë‹¤!
      </p>
    </div>

    <div class="card-body">
      <form id="quoteForm" method="POST" action="/quote/submit">
        <!-- ê³ ê°ì •ë³´ -->
        <h5 class="fw-bold mt-4">ğŸ§ ê³ ê°ì •ë³´</h5>
        <div class="mb-3">
          <label for="customer_name" class="form-label">ê³ ê°ëª… *</label>
          <input type="text" class="form-control" id="customer_name" name="customer_name" required>
        </div>
        <div class="mb-3">
          <label for="phone" class="form-label">ì—°ë½ì²˜ *</label>
          <input type="text" class="form-control" id="phone" name="phone" required placeholder="010-1234-5678">
        </div>

        <!-- ì—¬í–‰ì§€ ì„ íƒ -->
        <h5 class="fw-bold mt-4">ğŸŒ ì—¬í–‰ì§€ ì„ íƒ</h5>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="country" class="form-label">êµ­ê°€ *</label>
            <select class="form-select" id="country" name="country" required>
              <option value="">ì„ íƒ</option>
              <option value="íƒœêµ­">íƒœêµ­</option>
              <option value="ë² íŠ¸ë‚¨">ë² íŠ¸ë‚¨</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="region" class="form-label">ì§€ì—­ *</label>
            <select class="form-select" id="region" name="region" required onchange="updateProducts()">
              <option value="">ì„ íƒ</option>
              <option value="í‘¸ì¼“">í‘¸ì¼“</option>
              <option value="ë‹¤ë‚­">ë‹¤ë‚­</option>
              <option value="ë°©ì½•">ë°©ì½•</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label for="product" class="form-label">ìƒí’ˆ (ì„ íƒ)</label>
            <select class="form-select" id="product" name="product">
              <option value="">ì„ íƒ</option>
            </select>
          </div>
        </div>
        <div class="mb-3">
          <label for="custom_destination" class="form-label">ì§ì ‘ ì…ë ¥</label>
          <input type="text" class="form-control" id="custom_destination" name="custom_destination" placeholder="ì˜ˆ: í‘¸ì¼“ 4ë°• 6ì¼ ììœ ì—¬í–‰ + ìŠ¤ëƒ… í¬í•¨">
        </div>

        <!-- ì—¬í–‰ê¸°ê°„ -->
        <h5 class="fw-bold mt-4">ğŸ“… ì—¬í–‰ê¸°ê°„</h5>
        <div class="mb-3">
          <input type="text" class="form-control" id="travel_period" name="travel_period" placeholder="ì—¬í–‰ ì¶œë°œì¼ ~ ë„ì°©ì¼" required>
        </div>

        <!-- ì´ì¸ì› -->
        <h5 class="fw-bold mt-4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ì´ì¸ì›</h5>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="adult" class="form-label">ì„±ì¸</label>
            <input type="number" class="form-control" id="adult" name="adult" value="2" min="0">
          </div>
          <div class="col-md-4 mb-3">
            <label for="child" class="form-label">ì•„ë™</label>
            <input type="number" class="form-control" id="child" name="child" value="0" min="0">
          </div>
          <div class="col-md-4 mb-3">
            <label for="infant" class="form-label">ìœ ì•„</label>
            <input type="number" class="form-control" id="infant" name="infant" value="0" min="0">
          </div>
        </div>

        <!-- í•­ê³µ ì •ë³´ -->
        <h5 class="fw-bold mt-4">ğŸ›« í•­ê³µ ì •ë³´</h5>
        <div class="mb-2">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flight_status" id="flight1" value="ê°€ì´ë“œ ì¶”ì²œ" checked>
            <label class="form-check-label" for="flight1">ì˜ˆì•½ ì „ (ê°€ì´ë“œ 4U ì¶”ì²œ)</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="flight_status" id="flight2" value="ì§ì ‘ ì˜ˆì•½ ì˜ˆì •">
            <label class="form-check-label" for="flight2">ì˜ˆì•½ ì „ (ì§ì ‘ ì˜ˆì•½ ì˜ˆì •)</label>
          </div>
          <div class="form-check d-flex align-items-center">
            <input class="form-check-input me-2" type="radio" name="flight_status" id="flight3" value="ì˜ˆì•½ ì™„ë£Œ">
            <label class="form-check-label me-2" for="flight3">ì˜ˆì•½ ì™„ë£Œ</label>
            <input type="text" class="form-control form-control-sm" name="flight_number" placeholder="í•­ê³µí¸ëª…ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”! ì˜ˆ: KE 005 / KE 006" style="width: 100%;">
          </div>
        </div>

        <!-- ë¦¬ì¡°íŠ¸ ì •ë³´ -->
        <h5 class="fw-bold mt-4">ğŸ¨ ë¦¬ì¡°íŠ¸ ì •ë³´</h5>
        <div class="mb-3">
          <label class="form-label">ì›í•˜ëŠ” ë¦¬ì¡°íŠ¸ ìŠ¤íƒ€ì¼</label><br>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" name="resort_style" value="5ì„±ê¸‰" id="resort_style1">
            <label class="form-check-label" for="resort_style1">5ì„±ê¸‰</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" name="resort_style" value="4ì„±ê¸‰" id="resort_style2">
            <label class="form-check-label" for="resort_style2">4ì„±ê¸‰</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" name="resort_style" value="í’€ë¹Œë¼" id="resort_style3">
            <label class="form-check-label" for="resort_style3">í’€ë¹Œë¼</label>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">ì˜ˆì•½ ìƒíƒœ</label><br>
          <div class="form-check d-flex align-items-center mb-2">
            <input class="form-check-input me-2" type="radio" name="resort_status" id="resort1" value="ê°€ì´ë“œ ì¶”ì²œ" checked>
            <label class="form-check-label me-2" for="resort1">ì˜ˆì•½ ì „ (ê°€ì´ë“œ 4U ì¶”ì²œ)</label>
            <input type="text" class="form-control form-control-sm" name="resort_suggestion" placeholder="ì˜ˆì•½ì„ ì›í•˜ì‹œëŠ” ë¦¬ì¡°íŠ¸ê°€ ìˆìœ¼ì‹œë©´ ì…ë ¥í•´ ì£¼ì„¸ìš”! ì˜ˆ: ì„¼íƒ€ë¼ í’€ë¹Œë¼" style="width: 100%;">
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="resort_status" id="resort2" value="ì§ì ‘ ì˜ˆì•½ ì˜ˆì •">
            <label class="form-check-label" for="resort2">ì˜ˆì•½ ì „ (ì§ì ‘ ì˜ˆì•½ ì˜ˆì •)</label>
          </div>
          <div class="form-check d-flex align-items-center">
            <input class="form-check-input me-2" type="radio" name="resort_status" id="resort3" value="ì˜ˆì•½ ì™„ë£Œ">
            <label class="form-check-label me-2" for="resort3">ì˜ˆì•½ ì™„ë£Œ</label>
            <input type="text" class="form-control form-control-sm" name="resort_name" placeholder="ë¦¬ì¡°íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”! ì˜ˆ: ì„¼íƒ€ë¼ í’€ë¹Œë¼" style="width: 100%;">
          </div>
        </div>

        <!-- ê¸°íƒ€ ìš”ì²­ì‚¬í•­ -->
        <h5 class="fw-bold mt-4">ğŸ“ ê¸°íƒ€ ìš”ì²­ì‚¬í•­</h5>
        <div class="mb-4">
          <textarea class="form-control" name="notes" rows="4" placeholder="ì˜ˆ: í’€ë¹Œë¼ ì›í•¨, ì°¨ëŸ‰ í¬í•¨ ë“±"></textarea>
        </div>

        <!-- ì•½ê´€ ë™ì˜ -->
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="agree" name="agree" required>
          <label class="form-check-label" for="agree">
            ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
          </label>
        </div>

        <!-- ì œì¶œ ë²„íŠ¼ -->
        <div class="text-center">
          <button type="submit" class="btn btn-primary px-4 py-2 fw-bold" style="font-size: 18px;">
            âœ… ë§ì¶¤ ê²¬ì  ìš”ì²­
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ìŠ¤í¬ë¦½íŠ¸ -->
<link rel="stylesheet" href="{{ url_for('static', filename='flatpickr/flatpickr.min.css') }}">
<script src="{{ url_for('static', filename='flatpickr/flatpickr.min.js') }}"></script>
<script>
  flatpickr("#travel_period", {
    mode: "range",
    dateFormat: "Y-m-d",
    locale: "ko"
  });

  document.getElementById('phone').addEventListener('input', function (e) {
    let number = e.target.value.replace(/\D/g, '');
    if (number.length === 11) {
      e.target.value = number.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
    } else if (number.length === 10) {
      e.target.value = number.replace(/(\d{3})(\d{3})(\d{4})/, '$1-$2-$3');
    }
  });

  function updateProducts() {
    const region = document.getElementById('region').value;
    const product = document.getElementById('product');
    const options = {
      'í‘¸ì¼“': ['í‘¸ì¼“ ììœ ì—¬í–‰ 4ë°•6ì¼', 'í‘¸ì¼“ í—ˆë‹ˆë¬¸ 5ì„±ê¸‰', 'í‘¸ì¼“ ê°€ì¡± í’€ë¹Œë¼'],
      'ë‹¤ë‚­': ['ë‹¤ë‚­ 3ë°•5ì¼ íŒ¨í‚¤ì§€', 'ë‹¤ë‚­ ê³¨í”„íˆ¬ì–´', 'ë‹¤ë‚­ ììœ ì—¬í–‰ ì¶”ì²œ'],
      'ë°©ì½•': ['ë°©ì½• + íŒŒíƒ€ì•¼ íŒ¨í‚¤ì§€', 'ë°©ì½• ì‡¼í•‘ & ë§ˆì‚¬ì§€', 'ë°©ì½• ê°€ì¡± ììœ ì—¬í–‰']
    };

    product.innerHTML = '<option value="">ì„ íƒ</option>';
    if (options[region]) {
      options[region].forEach(function (item) {
        const opt = document.createElement('option');
        opt.value = item;
        opt.text = item;
        product.appendChild(opt);
      });
    }
  }

  document.getElementById('quoteForm').addEventListener('submit', function () {
    alert("ë§ì¶¤ ê²¬ì  ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!");
  });
</script>
{% endblock %}
